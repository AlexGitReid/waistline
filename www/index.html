<!DOCTYPE html>
<!--
    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
     KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.
-->

<html>
    <head>
      <!--  <meta http-equiv="Content-Security-Policy" content="default-src * data: gap; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' 'unsafe-eval'">-->
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height">

        <!-- jQuery mobile theme -->
        <link rel="stylesheet" href="css/themes/blank.css" />
        <link rel="stylesheet" href="css/themes/jquery.mobile.icons.min.css" />
        <link rel="stylesheet" href="css/jquery.mobile.structure-1.4.5.min.css" />

        <!-- jQuerymobile -->
        <script src="js/jquery-1.11.3.min.js"></script>
        <script src="js/jquery.mobile-1.4.5.min.js"></script>

        <!-- Chart JS -->
        <script src="js/Chart.bundle.min.js"></script>

        <!-- My extra styles -->
        <link rel="stylesheet" href="css/styles.css" />
        <title>Libre Diet</title>
    </head>
    <body>
      <!--Home page -->
      <div data-role="page" id="home">
        <div data-role="header">
          <h1>Libre Diet</h1>
        </div>
        <div data-role="main" class="ui-content">
          <a data-role="button" id="openDiary" href="#diaryPage">Diary</a>
          <a data-role="button" id="openStats" href="#statsPage">Statistics</a>
          <a data-role="button" id="openFoods" href="#foodListPage">Food List</a>
          <a data-role="button" id="openSettings" href="#settingsPage">Settings</a>
          <a data-role="button" id="openSettings" href="#importDataPopup" data-rel="popup">Import</a>
          <a data-role="button" id="openSettings" href="javascript:dbHandler.exportToFile();">Export</a>
        </div>
        <div data-role="footer" class="footer" data-position="fixed" data-tap-toggle="false">
          <div id="progress">
            <div class="calorieCount"></div>
          </div>
          <div class="ui-grid-b statusBar"> <!--3 column layout-->
            <div class="ui-block-a heading">Goal</div>
            <div class="ui-block-b heading">Used</div>
            <div class="ui-block-c heading">Remaining</div>
            <div class="ui-block-a stat">0</div>
            <div class="ui-block-b stat">0</div>
            <div class="ui-block-c stat">0</div>
          </div>
        </div>
        <div data-role="popup" id="importDataPopup">
          <div data-role="header">
            <h1>Import Data</h1>
          </div>
          <div data-role="main" class="ui-content">
            <p>Are you sure you want import? Doing so will overwrite your existing data.</p>
            <form action="index.html" data-ajax="false" onsubmit="dbHandler.readFromFile();">
              <a data-role="button" id="cancel" data-rel="back">Cancel</a>
              <button type="submit" name="import" data-role="button">Import</button>
            </form>
          </div>
        </div>
      </div>

      <!--Diary page -->
      <div data-role="page" id="diaryPage">
        <div data-role="header" data-position="fixed" data-tap-toggle="false">
          <a data-rel="back" class="ui-btn ui-icon-arrow-l ui-btn-icon-notext ui-corner-all ui-nodisc-icon"></a>
          <h1>Diary</h1>
        </div>
        <div data-role="main" class="ui-content">
          <div id="diaryDate"></div>
          <ul data-role="listview" id="diaryListview" data-icon="false"></ul>
        </div>
        <div data-role="footer" class="footer"  data-position="fixed" data-tap-toggle="false">
          <div class="calorieCount"></div>
          <div class="ui-grid-b statusBar"> <!--3 column layout-->
            <div class="ui-block-a heading">Goal</div>
            <div class="ui-block-b heading">Food</div>
            <div class="ui-block-c heading">Remaining</div>
            <div class="ui-block-a stat">0</div>
            <div class="ui-block-b stat">0</div>
            <div class="ui-block-c stat">0</div>
          </div>
        </div>
        <div data-role="popup" id="deleteDiaryListItemPopup">
          <div data-role="header">
            <h1>Delete Entry</h1>
          </div>
          <div data-role="main" class="ui-content">
            <p>Are you sure you want to delete this item?</p>
            <a data-role="button" id="cancel" data-rel="back">Cancel</a>
            <button data-role="button">Delete</button>
          </div>
        </div>
      </div>

      <!--Diary Item View/Edit Page-->
      <div data-role="page" id="editDiaryItemPage">
        <div data-role="header">
          <a data-rel="back" class="ui-btn ui-icon-arrow-l ui-btn-icon-notext ui-corner-all ui-nodisc-icon"></a>
          <h1>Edit Diary Entry</h1>
        </div>
        <div data-role="main" class="ui-content">
          <h3 id="diaryItemName"></h3>
            <form onsubmit="editDiaryItemFormAction(); return false;" id="editDiaryItemForm">
            <input type="hidden" id="id"> <!--The ID of the diary entry being edited-->
            <input type="hidden" id="calories">
            <label id="caloriesDisplayLabel" for="caloriesDisplay">Calories</label>
            <p id="caloriesDisplay"></p>
            <label for="quantity">Number of Servings</label>
            <input type="number" name="quantity" id="quantity" step="any" required="true">
            <label for="category">Category</label>
            <select name="category" id="category" data-native-menu="false">
              <option value="Breakfast">Breakfast</option>
              <option value="Lunch">Lunch</option>
              <option value="Dinner">Dinner</option>
              <option value="Snacks">Snacks</option>
            </select>
            <button type="submit" id="saveDiaryItem" name="saveDiaryItem">Save</button>
          </form>
        </div>
      </div>

      <!--Statistics page -->
      <div data-role="page" id="statsPage">
        <div data-role="header" data-position="fixed" data-tap-toggle="false">
          <a href="#home" class="ui-btn ui-icon-arrow-l ui-btn-icon-notext ui-corner-all ui-nodisc-icon"></a>
          <h1>Statistics</h1>
        </div>
        <div data-role="main" class="ui-content">
          <select name="range" id="range" data-native-menu="false">
            <option value="week">1 Week</option>
            <option value="month" selected="selected">1 Month</option>
            <option value="3month">3 Months</option>
            <option value="6month">6 Months</option>
            <option value="12month">1 Year</option>
          </select>
          <canvas id="weightChart" height="200" width="300"></canvas>
          <ul data-role="listview" id="weightLog"></ul>
        </div>
      </div>

      <!--Food list page -->
      <div data-role="page" id="foodListPage">
        <div data-role="header" data-position="fixed" data-tap-toggle="false">
          <a href="index.html" class="ui-btn ui-icon-arrow-l ui-btn-icon-notext ui-corner-all ui-nodisc-icon"></a>
          <h1>Food List</h1>
          <a id="addFood" class="ui-btn ui-icon-plus ui-btn-icon-notext ui-corner-all ui-nodisc-icon"></a>
        </div>
        <div data-role="main" class="ui-content">
          <form class="ui-filterable">
            <input type="text" data-type="search" id="filterFoodList" placeholder="Type to search">
            <input type="hidden" id="category" value=""/>
          </form>
          <ul data-role="listview" class="ui-nodisc-icon ui-alt-icon"  id="foodListview" data-filter="true" data-input="#filterFoodList" data-split-icon="edit">
          </ul>
        </div>
        <div data-role="popup" id="deleteFoodListItemPopup">
          <div data-role="header">
            <h1>Delete Food</h1>
          </div>
          <div data-role="main" class="ui-content">
            <p>Are you sure you want to delete this item?</p>
            <a data-role="button" id="cancel" data-rel="back">Cancel</a>
            <button data-role="button">Delete</button>
          </div>
        </div>
      </div>

      <!--Add/Edit food page -->
      <div data-role="page" id="editFoodPage">
        <div data-role="header">
          <a href="index.html#foodListPage" class="ui-btn ui-icon-arrow-l ui-btn-icon-notext ui-corner-all ui-nodisc-icon"></a>
          <h1>Add Food</h1>
          <a href="javascript:scan();" class="ui-btn ui-icon-camera ui-btn-icon-notext ui-corner-all ui-nodisc-icon"></a>
        </div>
        <div data-role="main" class="ui-content">
          <form onsubmit="addFoodFormAction(); return false;" id="editFoodForm">

            <input type="hidden" id="foodId" value="">

            <label for="foodName">Name of Food</label>
            <input type="text" name="foodName" id="foodName" required="true" placeholder="Tunnock's Teacake">

            <label for="foodPortion">Portion</label>
            <input type="text" name="foodPortion" id="foodPortion" required="true" placeholder="24g">

            <label for="foodCalories">Calories</label>
            <input type="number" pattern="[0-9]*" name="foodCalories" id="foodCalories" required="true" placeholder="106">

            <button type="submit" name="saveFood">Save</button>
          </form>
          <div id="foodImage"><img></img></div>
        </div>
      </div>

      <!--Settings page -->
      <div data-role="page" id="settingsPage">
        <div data-role="header">
          <a href="index.html" class="ui-btn ui-icon-arrow-l ui-btn-icon-notext ui-corner-all ui-nodisc-icon"></a>
          <h1>Settings</h1>
        </div>
        <div data-role="main" class="ui-content">
          <form onsubmit="saveUserSettings(); return false;" id="settingsForm">

            <label for="weight">Current Weight (kg)</label>
            <input type="number" name="weight" id="weight">

            <label for="calorie-goal">Daily Calorie Goal</label>
            <input type="number" name="calorieGoal" id="calorieGoal">

            <label for="goalIsMin">Goal is Minimum</label>
            <input type="checkbox" name="goalIsMin" id="goalIsMin">

            <label for="scanImages">Show Images of Scanned Food</label>
            <input type="checkbox" name="scanImages" id="scanImages">

            <button type="submit" name="saveSettings">Save</button>
          </form>
        </div>
      </div>

      <script type="text/javascript" src="cordova.js"></script>
      <script type="text/javascript" src="js/db-handler.js"></script>
      <script type="text/javascript" src="js/index.js"></script>
    </body>
</html>
